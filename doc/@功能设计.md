# project_portrait
项目画像（分析）工具


## ProjectPortraitConsole
- [ ] 【P0】【1000】项目全局
    - [ ] 【P2】【1001】数量统计：按照类型统计文件数量（例：java-300、xml-100）
    - [ ] 【P0】【1002】层级关系
        - [x] 【P0】【1002-01】筛选条件：输入根节点（模糊匹配），进行查询并展示，空代表全部【梁金柱】
        - [ ] 【P1】【1002-02】筛选条件：tag-owner列表，多选【梁金柱】
        - [ ] 【P1】【1002-03】筛选条件：tag-function列表，多选【梁金柱】
        - [ ] 【P1】【1002-04】筛选条件：tag-other列表(太多就显示部分)【梁金柱】
        - [ ] 【P1】【1002-05】筛选条件：支持一键取消所有筛选条件【梁金柱】
        - [ ] 【P2】【1002-06】展示：元素可选：tagOwner、tagFunction、tagCommon、tagOther
        - [ ] 【P3】【1002-07】展示：形式：层级结构、平行结构
        - [x] 【P0】【1002-08】操作：点击节点，支持展开、折叠视图【梁金柱】
        - [ ] 【P0】【1002-09】操作：点击节点，支持弹出"tag管理视图"（"标签"模块下的公共视图）【梁金柱】
        - [ ] 【P0】【1002-10】操作：点击节点，支持查询节点的引用关系
        - [ ] 【P3】【1002-11】操作：点击节点，支持IDE打开文件
        

- [ ] 【P0】【2000】逻辑关系
    - [ ] 【P0】【2001】引用关系
        - [ ] 【P0】【2001-01】筛选条件：输入类名（全匹配），进行查询并展示，空代表全部
        - [ ] 【P2】【2001-02】筛选条件：选择展示1层、2层、all层
        - [ ] 【P0】【2001-03】筛选条件：选择展示尾层类型（如activity为结尾层）
        - [ ] 【P0】【2001-04】操作：点击节点，支持弹出"tag管理视图"（"标签"模块下的公共视图）
        - [ ] 【P2】【2001-05】展示：悬停节点，展示节点详情
        - [ ] 【P2】【2001-06】展示：可选视图，结构视图or复杂度视图

    
- [ ] 【P0】【3000】标签
    - [ ] 【P0】【3001】owner、function、other标签列表，展示所有标签，支持点击标签，跳转到"层级关系"视图，查找标签对应的文件【梁金柱】
    - [ ] 【P0】【3002】owner标签列表支持新增操作、无法删除，数据为管理员导入，需要做唯一性验证【梁金柱-Console】【何健-Server】
    - [ ] 【P0】【3003】other、function、common标签列表，支持新增、删除，删除操作为逻辑删除【梁金柱-Console】【何健-Server】
    - [x] 【P0】【3004】tag管理视图：展示所有类型的tag，支持引用新tag及删除已引用的tag等操作【梁金柱】
    - [ ] 【P0】【3005】对文件夹进行tag引用、取消引用的过程，将文件夹下的所有子文件一并进行相同处理（已存在tag引用数据的子文件除外）


- [ ] 【P0】【4000】优化/质量筛查
    - [ ] 【P0】【4001】资源重复
        - [x] 【P0】【4001-01】列表展示资源重复定义的情况，倒排序【梁金柱】
        - [ ] 【P0】【4001-02】点击条目可列表展示当前资源的所有重复定义
        - [ ] 【P0】【4001-03】点击定义的资源，跳转到"引用关系"视图，查找引用关系
    - [ ] 【P1】【4002】TODO：列表展示TODO的情况，其他操作同"4001"
    - [ ] 【P0】【4003】文件行数：列表展示文件行数的情况，其他操作同"4001"
    - [ ] 【P0】【4004】文件大小：列表展示文件大小的情况，其他操作同"4001"
    - [ ] 【P1】【4005】硬编码：列表展示硬编码的情况，其他操作同"4001"【符飚-Scan】【梁金柱-Server】【梁金柱-Console】
    - [ ] 【P0】【4006】自定义规则筛查
        - [x] 【P0】【4006-01】自定义规则默认导入【梁金柱】
        - [ ] 【P0】【4006-02】支持新增、删除自定义规则（如不允许直接使用Integer.parse等）【梁金柱-Console】【何健-Server】
        - [x] 【P0】【4006-03】列表显示不符合规则的文件【梁金柱】
        - [ ] 【P0】【4006-04】点击节点，支持弹出"tag管理视图"（"标签"模块下的公共视图）

- [ ] 【P0】【5000】规则无限可能
    - [ ] 【P1】【5001】单一规则：输入规则（一项正则），手动启动扫描，列表展示结果；点击条目，跳转到"引用关系"视图，查找引用关系
    - [ ] 【P2】【5002】交叉规则：输入规则（两项正则），手动启动扫描，列表展示两项结果，并显示差异；点击条目，跳转到"引用关系"视图，查找引用关系
    - [ ] 【P2】【5003】整合现有"All bean、GetContext"等规则至"5001、5002"页面，支持快速选择已有规则
  
- [ ] 【P3】【6000】控制台
    - [ ] 【P3】【6001】命令：允许通过页面操作或设定定时器，控制代码扫描系统的脚本指令
    - [ ] 【P3】【6002】系统日志：记录显示扫描日志、系统操作日志等

- [ ] 【P3】【7000】关于、其他
    - [ ] 【P3】【7001】系统说明
    - [ ] 【P3】【7002】贡献者清单
    - [ ] 【P3】【7003】系统UI统一（图标等）
    - [ ] 【P3】【7004】功能名称重新评估，提高可识别性（如'规则无限可能->复杂查询'）

- [ ] 【P0】【8000】Dashboard数据集合面板
    - [ ] 【P0】【8001】重点展示各项数据or功能的可量化指标（1、Crash预防：检测存在可能Crash点x处；2、风险范围检索：支持检索内容变化的风险范围；3、质量分析：检索出项目存在x%资源重复、x个文件行数过长、x个文件体积过大、xxxx；4、功能人员统计：统计出x人参与此项目、包含x个核心功能、22个通用能力包、xxxx；）【梁金柱-Scan】【何健-Server】【梁金柱-Console】
    - [ ] 【P0】【8002】展示数据or功能区域的跳转到子页面操作【梁金柱】


## ProjectPortraitServer
- [ ] 【P0】【0000】接口服务
    - [ ] 【P0】【0001】支持"ProjectPortraitConsole"功能设计中的所有功能
    - [ ] 【P3】【0002】满足"6001"支持手动或定时控制扫描系统的脚本指令


## ProjectPortraitScan
- [ ] 【P0】【0500】扫描系统
    - [ ] 【P0】【0501】支持"ProjectPortraitConsole"功能设计中的所有功能
    - [x] 【P0】【0502】每次全量扫描过程，"file"表只能做更新操作（不存在才新增），通过"scanTime、isNew"字段区分新旧数据【符飚】
    - [ ] 【P0】【0503】每次全量扫描过程，"reference"表做清表操作，扫描多类型reference关系，包括"java-java、java-layout、java-resource、layout-layout、layout-java、layout-resource"【常志达】
    - [x] 【P0】【0504】每次全量扫描过程，"resource"表做清表操作，扫描数据【梁金柱】
    - [x] 【P0】【0505】每次全量扫描过程，"tag"表不做任何操作【梁金柱】
    - [x] 【P0】【0506】每次全量扫描过程，"tag_data"表不做任何操作【梁金柱】
    - [x] 【P0】【0507】每次全量扫描过程，"rule"表不做任何操作，通过"type"区分是"bad"规则或者"custom"规则【梁金柱】
    - [x] 【P0】【0508】每次全量扫描过程，"rule_data"表做清表操作，扫描数据【梁金柱】
    - [ ] 【P1】【0509】扫描过程中，如命中特定owner（需要与tag表的owner-value做匹配，必要的话，tag表增加aliaslist字段，用作模糊匹配），如"tag_data"表无此文件的owner数据，则新增，否则忽略（避免覆盖人工操作修改后的数据）。另，注意此"定制逻辑"的独立性，必须与主扫描流程解耦
    - [x] 【P0】【0510】"rule"表删除如下字段：type【符飚】
    - [x] 【P0】【0511】"rule"表新增如下字段：group（规则所在的组，如"hardcode硬编码、error错误、warn告警、user用户自定义"，通过规则组获取特定功能的数据）、scan_file_suffix（检索文件后缀java、xml等）、regular（正则表达式，用户直接输入，或通过key_right_left生成，扫描过程中通过regular命中数据）【符飚】
    - [x] 【P0】【0512】"rule_data"表增加如下字段：group（对应rule表的group，用来解决两表联查）【符飚】
